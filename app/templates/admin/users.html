{% extends "admin/layout.html" %}
{% block title %}Admin Dashboard - Manage Users{% endblock %}

{% block admin_content %}
<div class="bg-white dark:bg-slate-800 shadow-sm rounded-lg overflow-hidden">
    <div class="p-6 border-b border-slate-200 dark:border-slate-700">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100">User Management</h2>
        <p class="mt-1 text-slate-600 dark:text-slate-400">View and manage all registered users in the system.</p>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full min-w-max">
            <thead class="bg-slate-50 dark:bg-slate-700">
                <tr>
                    <th class="px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider">Name</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider">Email</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider">Role</th>
                    <th class="px-6 py-4 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider">Balance</th>
                    <th class="px-6 py-4 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider">Joined</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                {% for u in users %}
                <tr class="hover:bg-slate-50 dark:hover:bg-slate-700/50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-slate-900 dark:text-slate-100">{{ u.first_name }} {{ u.last_name }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-slate-600 dark:text-slate-400">{{ u.email }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                            {% if u.role == 'admin' %} bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200
                            {% elif u.role == 'staff' %} bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200
                            {% else %} bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 {% endif %}">
                            {{ u.role|capitalize }}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right">
                        <div class="text-sm font-medium text-green-600 dark:text-green-400">${{ "%.2f"|format(u.balance) }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400">
                        {{ u.created_at.strftime('%Y-%m-%d') if u.created_at else 'N/A' }}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-center py-8 text-slate-500">No users found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}